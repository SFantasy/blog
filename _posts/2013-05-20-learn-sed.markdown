---
layout: post
comments: true
title: "sed与正则表达式"
date: 2013-05-20 23:00
categories: Shell
---

今天开始有「组织」地学习一些shell script中的一些工具， 如sed, awk等。

> sed(stream editor) is a Unix utility that parses and transform text. --wikipedia

sed是文本处理中经常用到的工具，对于正则表达式的要求比较高，而正则这一块也是「蓄谋已久」的地方，所以也一并、好好的来学习学习！

### 正则表达式

在我印象中，不同语言对于正则表达式还是有一点不同的，具体到语言的细节之中，不过总体上而言还是基本相同的，比如以下正则中的保留字符：

<table>
  <tr>
    <th>标记</th>
	<th>描述</th>
  </tr>
  <tr>
    <td>^</td>
	<td>起始标记</td>
  </tr>
  <tr>
    <td>$</td>
	<td>行尾标记</td>
  </tr>
  <tr>
    <td>.</td>
	<td>匹配任意字符</td>
  </tr>
  <tr>
    <td>[ ]</td>
	  <td>匹配在[ ]中的任意一个字符</td>
  </tr>
  <tr>
    <td>[^]</td>
    <td>匹配除在[^]之外的任意一个字符</td>
  </tr>
  <tr>
    <td>[-]</td>
    <td>匹配[]中制定范围内的任意一个字符</td>
  </tr>
  <tr>
    <td>?</td>
    <td>匹配之前的项1次或者0次</td>
  </tr>
  <tr>
    <td>+</td>
    <td>匹配之前的项1次或者多次</td>
  </tr>
  <tr>
    <td>*</td>
    <td>匹配之前的项0次或者多次</td>
  </tr>
  <tr>
    <td>( )</td>
    <td>创建一个用于匹配的字串</td>
  </tr>
  <tr>
    <td>{n}</td>
    <td>匹配之前的项n次</td>
  </tr>
  <tr>
    <td>{n,}</td>
    <td>之前的项至少需要匹配n次</td>
  </tr>
  <tr>
    <td>{n, m}</td>
    <td>指定之前的项所必需匹配的最小和最大次数</td>
  </tr>
  <tr>
    <td>|</td>
    <td>匹配|两边的任意一项</td>
  </tr>
  <tr>
    <td>/</td>
    <td>对上述字符进行转义</td>
  </tr>
</table>

还是从几个示例中来学习一下正则表达式。

匹配邮件地址:

    [a-z0-9_]+@[a-z0-9]+\.[a-z]+

- [a-z0-9_]+  匹配@前用字母、数字和下划线组成的1项或者多项字符串
- @没有任何正则处理，所以就匹配其本身
- [a-z0-9]+\.[a-z]+ 匹配@后的域名，\.对.进行转义，表示它就是一个.而不是「匹配任意一个字符」

匹配IP地址:

	[0-9]{1, 3}\.[0-9]{1, 3}\.[0-9]{1, 3}\.[0-9]{1, 3}
	
- [0-9]{1, 3}匹配0-9中1位或者3位数字
	
### 使用sed处理文本

更多有关sed的内容可以参考其man page:

    man sed
	
还有一个不错的资源是单行sed脚本:[]()
